<!DOCTYPE html>
<html>

<!-- Mirrored from ares.dev/posts by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Jul 2021 05:51:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<title>Posts &mdash; ares</title>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='robots' content='noarchive'>
<style>
* {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  margin: 0em;
  outline: none;
  padding: 0em;
}

html {
  overflow-y: scroll;
}

body {
  background: #222;
  color: #eee;
  font-family: "Verdana", sans-serif;
  font-size: 9.5pt;
  line-height: 1.35;
  word-wrap: break-word;
}

a {
  font-weight: bold;
  text-decoration: none;
}

header {
  background: url("images/prism.png");
  border-bottom: 1px solid #000;
  padding: 8px 8px 4px 8px;
}

body > nav {
  background: #444;
  border-bottom: 1px solid #000;
}

body > nav a {
  color: #eee;
  display: inline-block;
  font-size: 0.95em;
  padding: 0.4em 0.8em;
}

body > nav a:hover {
  background: #666;
}

main {
  padding: 0.8em;
}

main a {
  color: #88e;
}

main a:hover {
  color: #bbe;
}

main figcaption {
  color: #ddd;
  font-size: 8pt;
  font-style: italic;
  margin-bottom: 0.5em;
}

main h2 {
  border-bottom: 1px solid #555;
  margin-bottom: 0.25em;
  margin-top: 0.5em;
}

main h2 span {
  font-family: "Georgia";
  font-size: 11pt;
  float: right;
  margin-top: 0.4em;
}

main img {
  height: auto;
  max-height: 100vh;
  max-width: 100%;
  object-fit: contain;
}

main img.crisp {
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  image-rendering: -moz-crisp-edges;
}

main ol {
  font-size: 9.5pt;
  margin-top: -0.3em;
}

main ol li {
  display: inline;
}

main ol li:after {
  content: " » ";
  font-weight: bold;
}

main ol li:last-child:after {
  content: "";
}

main p {
  margin-bottom: 0.6em;
  max-width: 72em;
}

main p:last-child {
  margin-bottom: 0em;
}

main ul {
  list-style: none;
  margin-bottom: 0.8em;
}

main ul > ul {
  margin-left: 1em;
  margin-bottom: 0em;
}

main ul li:before {
  content: "• ";
}

main table {
  border: 1px solid #000;
  border-collapse: collapse;
  margin-bottom: 0.8em;
}

main table tr:nth-child(even) {
  background: #222222;
}

main table tr:nth-child(odd) {
  background: #2c2c2c;
}

main table tr th {
  background: #433;
  padding: 0.5em;
  text-align: left;
}

main table tr td {
  padding: 0.5em;
}

main pre:not([class]) {
  background: #223;
  border: 1px solid #888;
  margin: 0.5em;
  padding: 0.5em;
}

main pre.source-line {
  background: #111;
  float: left;
  padding: 0em 0.25em;
  text-align: right;
}

main pre.source-code {
  background: #333;
  margin-bottom: 0.8em;
  overflow: auto;
  padding-left: 0.5em;
}

main pre.binary {
  background: #333;
  margin-bottom: 0.5em;
  overflow: auto;
  padding: 0.2em 0.5em;
}

main div.gallery img {
  background: #fff;
  margin-bottom: 0.5em;
  margin-right: 0.5em;
}

main input {
  margin-bottom: 0.5em;
  vertical-align: middle;
}

main input[type="text"], input[type="submit"], main label, select {
  background: #333;
  border: 1px solid #888;
  color: #fff;
  padding: 0.4em;
}

main label, select {
  display: inline-block;
  margin-bottom: 0.5em;
}

main input[type="text"] {
  width: 100%;
}

main input[type="file"] {
  display: none;
}

main input[type="submit"], main label {
  background: #555;
  font-weight: bold;
}

main textarea {
  background: #333;
  border: 1px solid #888;
  color: #fff;
  height: 20em;
  padding: 0.4em;
  margin-bottom: 0.5em;
  width: 100%;
}

main .post {
  background: #333;
  border: 1px solid #888;
  border-radius: 8px;
  padding: 0.5em;
  margin-top: 1em;
  max-width: 72em;
  overflow: auto;
}

footer {
  padding: 0em 0.8em;
}

footer p {
  border-top: 1px solid #555;
  color: #aaa;
  font-size: 8pt;
  padding-bottom: 0.5em;
  padding-top: 0.3em;
}
</style>
</head>
<body>
<header>
   <a href='index.html'><img src='images/logo.png' alt='' width='217' height='42'></a>
</header>
<nav>
   <a href='about.html'>About</a><!--
--><a href='posts.html'>Posts</a><!--
--><a href='gallery.html'>Gallery</a><!--
--><a href='docs.html'>Docs</a>
</nav>
<main>
<ol><li><a href='index.html'><span>ares.dev</span></a></li><li><a href='posts.html'><span>posts</span></a></li></ol>
<div class='post'><p><a href='posts/20210626235137.html'>2021-06-26 23:51:37</a><br><a style='color: inherit;' href='posts/20210626235137.html'>ares v121 released</a></p>
<p>I've released ares v121. Because it is not fully complete or stable, it is released as source code only.</p>
<p>The license is now once again ISC instead of CC-BY-NC-ND.</p>
<p>Master System, WonderSwan, and WonderSwan Color compatibility have increased to 100%, with no remaining known bugs.</p>
<p>The Neo Geo Pocket is very close to 100% now with one issue remaining, where sound effects sometimes mute in games.</p>
<p>Nintendo 64 compatibility has increased to above 80% thanks to corrections to controller pak handling.</p>
<p>Several NES and Mega CD fixes have been added. EEPROM support has been added for the Mega Drive.</p>
<p>Memory cards and paks now pre-format themselves, so you don't have to do so in-game or in BIOS settings.</p>
<p>The new Neo Geo emulation is slowly improving, but it's still very preliminary with only seven games fully playable so far.</p>
<p>The Nintendo 64 SM5K and PlayStation HC05 processor cores have been emulated, but not connected yet due to a lack of information.</p>
<p>Added mouse input support and connected peripheral selection to the GUI, so mice and light gun games can now be used.</p>
<p>There is now per-system input mapping overlays, so you can map controllers based on the original system button names.</p>
<p>And lastly as promised, the SNES core has gained optional widescreen support.</p>
<p><strong>Changelog:</strong></p>
<ul>
<li>Nintendo 64: added Windows ABI support to dynamic recompilers</li>
<li>PlayStation: added Windows ABI support to dynamic recompiler</li>
<li>Nintendo 64: temporarily disabled 64-bit addressing mode due to issues</li>
<li>Nintendo 64: corrected analog stick ranges and emulated octagonal boundaries</li>
<li>Nintendo 64: code cleanups around memory access functions</li>
<li>Nintendo 64: started to implement RDRAM broadcasting (very incomplete still)</li>
<li>Mega Drive: improved VDP scanline renderer timing</li>
<li>M68K: corrected clipping bug in ADD,CMP,SUB instructions</li>
<li>Nintendo 64: improved SI scanning of PIF RAM and emulated more flags</li>
<li>Nintendo 64: added very accurate controller pak initialization code</li>
<li>Nintendo 64: improved controller analog stick approximations [MerryMage]</li>
<li>Nintendo 64: added priority queue to delay SI and PI DMA transfers</li>
<li>Master System: added bit-perfect YM2413 instrument patch sets</li>
<li>Mega Drive: fixed a bug with LINEA and LINEF instructions (should not decrement PC)</li>
<li>Mega Drive: added EEPROM emulation</li>
<li>mia: added Mega Drive and Mega 32X EEPROM database entries</li>
<li>nall: added priority_queue::remove(T) support</li>
<li>Nintendo 64: reverted 64-bit TLB (not actually present)</li>
<li>Neo Geo: initial implementation</li>
<li>Neo Geo: many emulation improvements</li>
<li>nall: add workaround for compilers that lack __has_builtin</li>
<li>Nintendo 64: ignore A15 on controller pak reads and writes</li>
<li>Master System: implemented Codemasters, Korea, MSX, Janggun mappers</li>
<li>Master System: improved Sega mapper emulation</li>
<li>Master System: added initial emulation of port $3e</li>
<li>Master System: added support to load BIOSes</li>
<li>Master System: initialize stack pointer to 0xfffd when no BIOS loaded [Luke Usher]</li>
<li>Game Boy Advance: emulated BIOS swap register [MerryMage]</li>
<li>Mega Drive: cancel pending IRQs when they are disabled [Jonas Quinn]</li>
<li>Mega Drive: fixed handling of VDP field flag [Jonas Quinn]</li>
<li>Mega Drive: mask upper bit of VDP sprite Y value when in progressive display mode [Jonas Quinn]</li>
<li>X24C01, M24Cxx: improve emulation of EEPROM command sequences</li>
<li>Famicom: added database entries for Jajamaru Gekimaden and Mazase Top Pro PRG-RAM</li>
<li>M24Cx: rewrote emulation to be more complete; though still not working for Cxx/Cxxx sizes</li>
<li>Nintendo 64: try stopping SI polling on recv=0xfe</li>
<li>Mega Drive: improved EEPROM emulation</li>
<li>Nintendo 64: fixed CPU SCC counter rate [simer]</li>
<li>Nintendo 64: added initial emulation of the SM5K processor (not connected yet)</li>
<li>lucia: update frame rate from the main thread to prevent a race condition with GTK</li>
<li>Master System: emulated sprite zoom and fifth-sprite status flag</li>
<li>Master System: corrected VDP background emulation for mode 4 [fixes Codemasters games]</li>
<li>Master System: latch VDP background nametable address and scroll registers [fixes Desert Speedtrap]</li>
<li>Master System: mask CRAM reads to 6-bit in Master System mode [fixes Mercs]</li>
<li>Master System: refactored VDP code</li>
<li>Z80: swapped IND/INI to post-decrement B, and OUTD/OUTI to pre-decrement B</li>
<li>lucia: fixed a crash when loading Game Gear games due to stubbing out the BIOS</li>
<li>Nintendo 64: fixed cartridge flash memory support</li>
<li>Master System: VDP line coincidence should be initialized to $ff [fixes Shadow Dancer]</li>
<li>Master System: VDP sprite overflow index defaults to $1f, not $00 [fixes PGA Tour Golf]</li>
<li>SN76489: corrected port latching behavior and noise volume writes [fixes Micro Machines]</li>
<li>TMS9918: greatly refactored code</li>
<li>V9938: greatly refactored code</li>
<li>Z80: disassembler fixes</li>
<li>lucia: corrected mapping of Master System pause button [fixes Baku Baku Panic]</li>
<li>nall: disable -Wstringop-overflow for GCC due to compiler heuristics error</li>
<li>M68HC05: initial core implementation added</li>
<li>M68000: renamed core from M68K</li>
<li>Super Famicom: clearing $4200.d0 stops active joypad polling for the rest of the frame [Jonas Quinn]</li>
<li>Master System: don't evaluate sprites past active display area [fixes Rescue Mission]</li>
<li>Mega Drive: don't acknowledge VDP IRQs until the CPU triggers them [fixes Mega Lo Mania]</li>
<li>lucia: begin refactoring input mapping to allow per-system mappings and multiple controller types</li>
<li>Game Gear: set CPU::in() unmapped return value to MDR; fixes RoboCop 3 [Jonas Quinn]</li>
<li>WonderSwan Color: do not mask screen tilemap base address; fixes Sorobang [FPGAzumSpass]</li>
<li>Mega Drive: set supervisor mode and clear trace mode for all exceptions; fixes Gouketsuji Ichizoku [Jonas Quinn]</li>
<li>Mega CD: format BRAM instead of leaving it uninitialized; fixes Popful Mail (US)</li>
<li>WonderSwan: add patch for Meitantei Conan: Nishi no Meitantei Saidai no Kiki!</li>
<li>Game Boy: add MBC1#M mapper database entries; fixes Bomber Man Collection, Genjin Collection, Momotarou Collection, and Mortal Kombat I &amp; II</li>
<li>Neo Geo Pocket: $8118 background register exists even in the K1GE GPU; fixes Samurai Shodown</li>
<li>Neo Geo Pocket Color: return 0xFF acknowledge byte after flash erase command; fixes Puzzle Link 2 and Memories off: Pure</li>
<li>Neo Geo Pocket: clear watchdog timer counter on trigger to prevent infinite triggering; fixes Neo Baccarat, Neo Cherry Master Color, and Neo Mystery Bonus</li>
<li>TLCS900H: do not allow interrupts to run between CPDR, LDIR, LDDR instructions; fixes Fantastic Night Dreams Cotton</li>
<li>Neo Geo Pocket: add all remaining missing I/O registers (not emulated, but registers are readable and writable now)</li>
<li>Neo Geo Pocket Color: above changes also fixed in-game audio in Crush Roller and Dynamite Slugger</li>
<li>Mega CD: added 1M mode WRAM swap request flag; fxies AX-101, Earnest Evans, and Might &amp; Magic III [TascoDLX]</li>
<li>lucia: added input mapping overlays for all remaining systems</li>
<li>lucia: added two-player support to all remaining systems</li>
<li>TLCS900H: refactored instruction decoder and disassembler using range-case</li>
<li>TLCS900H: improved emulation of (PC+d16) addressing mode (LDAR)</li>
<li>TMS9918, V9938, SMS VDP: corrected sprite zoom emulation [Jonas Quinn]</li>
<li>Neo Geo Pocket: added new debugging modules (flash ROM, I/O accesses, system calls)</li>
<li>Neo Geo Pocket: improved CPU interrupt logger (prints name of interrupt now)</li>
<li>Neo Geo Pocket: fixed a critical issue with interrupt priority levels; fixes many games</li>
<li>Neo Geo Pocket: added stubs for all remaining TMP95C061F I/O registers (not emulated yet)</li>
<li>Neo Geo Pocket: set CPU I/O port $b1.d2 reads to return 1 (fixes SNK Gals' Fighter)</li>
<li>Neo Geo Pocket: added stubs for undocumented CPU I/O ports $b6 and $b7</li>
<li>Super Famicom: PPU code restructuring</li>
<li>Super Famicom: added widescreen (16:9 and 21:9) support to the scanline renderer</li>
<li>WonderSwan: refactored I/O handlers to use switch/case instead of if tests</li>
<li>WonderSwan: rewrote PPU renderer to modularize each component (screen1, screen2, sprite, dac, etc)</li>
<li>WonderSwan: corrected timers to count down instead of up; fixes timing in many games [FPGAzumSpass]</li>
<li>WonderSwan: improved screen two window emulation [FPGAzumSpass]</li>
<li>hiro: TableView::onContext() is now TableView::onContext(TableViewCell) (not supported for Cocoa or Qt yet)</li>
<li>lucia: merged code to handle input assignment overlays and controller polling for each emulation core</li>
<li>lucia: added virtual mouse emulation and added mouse capture support</li>
<li>lucia: added support to change devices connected to controller ports</li>
<li>Neo Geo Pocket: added database workaround for underdumped Prize Game: PP-AA01 Pusher Program (Japan)</li>
<li>Neo Geo Pocket: fixed fast boot mode for Neo Cherry Pocket</li>
<li>nall/range: added new within() templates</li>
<li>V30MZ: emulated instruction prefetch</li>
<li>V30MZ: greatly improved instruction timings (thanks to FPGAzumSpass' test ROM)</li>
<li>WonderSwan: disabling an interrupt source does clear its pending status (fixes Digimon Tamers)</li>
<li>TLCS900H: improved prefetch handling and instruction timing (still imperfect)</li>
<li>TLCS900H: improved timing further (still imperfect)</li>
</ul>
<p><a href="index.html">Download Here</a></p>
<a href='posts/20210626235137/1-popful-mail.png'><img src='posts/20210626235137/1-popful-mail.png' alt=''></a><br>
<a href='posts/20210626235137/2-smw.png'><img src='posts/20210626235137/2-smw.png' alt=''></a><br>
<a href='posts/20210626235137/3-inputs.png'><img src='posts/20210626235137/3-inputs.png' alt=''></a><br>
</div>
<div class='post'><p><a href='posts/20210506151306.html'>2021-05-06 15:13:06</a><br><a style='color: inherit;' href='posts/20210506151306.html'>ares v120 released</a></p>
<p>This release provides improved Nintendo 64 and Mega Drive emulation, plus some emulation speedups and new features like keyboard-mapping for all Nintendo 64 controls.</p>
<p>The infamous Titan Overdrive demos now run with the exception of one glitched screen each, but you will need to compile with <code>profile=accuracy</code> to enable the required cycle-based VDP renderer for this to work. I'll try in the future to support as much of it as I can with the default scanline renderer as well.</p>
<p>Changelog:</p>
<ul>
<li>SH2: added support for Windows ABI to the recompiler</li>
<li>SH2: MAC must increment R[n] before reading from R[m]; fixes Virtua Fighter and Toughman Contest</li>
<li>SH2: fixed dynarec MOV @Rm+,Rn to not increment when Rm==Rn</li>
<li>SH2: fixed dynarec TST instruction</li>
<li>SH2: improved dynarec accuracy by breaking blocks on delay slot branches</li>
<li>SH2: improved dynarec accuracy by decreasing the underclocking amount</li>
<li>Mega Drive: implemented undocumented VSRAM and CRAM DMA fill</li>
<li>Mega Drive: simplified scanline VDP renderer; fixes TMNT: Tournament Fighters graphics</li>
<li>Mega Drive: improved region detection; correctly identifies Alien Soldier region now</li>
<li>Mega CD: fixed crash on game load</li>
<li>Super Famicom: fixed direct color mode; fixes Secret of Mana world map</li>
<li>WonderSwan Color: fixed initial state for new EEPROMs plus EEPROM size; fixes missing sound</li>
<li>lucia: fixed saving RAM files when a manual save path was specified</li>
<li>ruby: fixed library dependency detection for Arch Linux and other distributions</li>
<li>SH2: additional correction for dynarec MOV @Rm+,Rn instructions</li>
<li>hiro/GTK3: added CSS stylesheet overrides to improve appearance [Screwtape]</li>
<li>N64: VMRG was not clearing VCO in C++ version [Rasky]</li>
<li>N64: fixed &quot;ctc2&quot; in the disassembler</li>
<li>Mega Drive: VDP address/command bits are set even for non-register writes [Eke]</li>
<li>Mega Drive: implemented VDP FIFO with approximated timings</li>
<li>Mega Drive: implemented CPU bus arbitrator</li>
<li>N64: fixed RSP vector unit register values in the disassembler</li>
<li>Mega Drive: implemented proper VDP FIFO timings for both reads and writes (hopefully)</li>
<li>Mega Drive: enabled external and RAM refresh timing</li>
<li>Mega Drive: added (Mega Drive | Mega 32X) + Mega CD mode 1 emulation</li>
<li>Mega Drive: refactored dot-based VDP renderer</li>
<li>ares: added Thread::restart() function to reset a thread without resetting its clock</li>
<li>Mega Drive: improved DRAM refresh timings</li>
<li>Mega Drive: added VDP I/O logger</li>
<li>Mega Drive: fixed VDP counter emulation (still inaccurate)</li>
<li>Mega Drive: improved VDP DMA and FIFO emulation</li>
<li>Nintendo 64: report 64DD as missing for now; fixes F-Zero X</li>
<li>Nintendo 64: improved TLB emulation; fixes Conker's Bad Fur Day</li>
<li>Nintendo 64: PI DMA from flash always reads data, never the status; fixes Paper Mario</li>
<li>Mega Drive: improved VDP FIFO emulation</li>
<li>Mega Drive: improved VDP dot-renderer</li>
<li>nall/bit-range: fixed bug with bit indexes &gt;= 32</li>
<li>Mega Drive: fixed VDP read buffer indexing for VSRAM and CRAM</li>
<li>Mega Drive: fixed 68K to VDP DMA so that it instantly freezes the CPU</li>
<li>Mega Drive: emulated VDP left window hardware glitch where hscroll&amp;15!=0</li>
<li>Mega Drive: improved CPU interrupt handling</li>
<li>Mega Drive: added APU bus mirrorings</li>
<li>Mega Drive: emulated the VDP debug register</li>
<li>Mega Drive: fixed VDP VRAM DMA copy</li>
<li>Mega Drive: improved 128KB VRAM mode support</li>
<li>Mega Drive: mask sprite attribute table address in H40 mode [Sik]</li>
<li>Mega Drive: VDP timing improvements</li>
<li>Nintendo 64: improved EEPROM support; fixes Perfect Dark</li>
<li>Nintendo 64: improved VI interrupt support; fixes Star Wars: Rogue Squadron title screen [nodev]</li>
<li>Nintendo 64: emulated CIC-NUS-6105 copy protection; fixes Banjo-Tooie [XScale]</li>
<li>Nintendo 64: added serrate (interlace) support and fixed bug when supersampling in serrate mode</li>
<li>Nintendo 64: emulated CPU instruction cache</li>
<li>Nintendo 64: emulated CPU data cache</li>
<li>Nintendo 64: emulated CPU CACHE instruction</li>
<li>Nintendo 64: fixed CPU TLB bug; fixes GoldenEye</li>
<li>Nintendo 64: began adapting CPU cached interpreter into a dynamic recompiler</li>
<li>Nintendo 64: began adapting RSP cached interpreter into a dynamic recompiler</li>
<li>Nintendo 64: added 64-bit addressing and TLB supporting</li>
<li>Nintendo 64: added endian support to [LS][WD][LR] instructions</li>
<li>Nintendo 64: improved dynamic recompiler</li>
<li>PlayStation: began adapting CPU cached interpreter into a dynamic recompiler</li>
<li>lucia: allow mapping analog axes separately (allows mapping sticks to the keyboard)</li>
<li>Nintendo 64: corrected analog stick ranges</li>
<li>Nintendo 64: emulate the analog stick as an octagon rather than a circle [YetAnotherEmuDev]</li>
</ul>
<p><a href="index.html">Download Here</a></p>
</div>
</main>
<footer>
</footer>
<div style='display: none;'>
183.64.115.82
183.64.115.82
Mozilla/4.5 (compatible; HTTrack 3.0x; Windows 98)
</div>
<script>
if(screen.width == 1920 && screen.height == 1080
&& window.screenX == 13 && window.screenY == 45
&& window.outerWidth == 1075 && window.outerHeight == 969) {
  var nodes = document.getElementsByTagName("html");
  nodes[0].innerHTML = "";
}
</script>
</body>

<!-- Mirrored from ares.dev/posts by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Jul 2021 05:51:42 GMT -->
</html>
